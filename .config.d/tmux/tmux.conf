#------------------------------------------------------------------------------
# TMUX CONFIGURATION FILE
#
# Usage: Place this file at ~/.tmux.conf and reload with PREFIX r
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# CORE SETTINGS
#------------------------------------------------------------------------------

# Set Ctrl+Space as the prefix key (more ergonomic than the default Ctrl+b)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Start window and pane numbering at 1 instead of 0 for easier keyboard access
set -g base-index 1
set-window-option -g pane-base-index 1

# Enable mouse for selecting/resizing panes, scrolling, and selecting windows
set -g mouse on

# Reduce delay when pressing Escape key (improves vim/neovim experience)
set -s escape-time 0

# Configure terminal for full color support
set-option -g default-terminal "screen-256color"
set -ga terminal-overrides ",screen-256color*:Tc"

#------------------------------------------------------------------------------
# INTUITIVE KEYBINDINGS
#------------------------------------------------------------------------------

# Window Management
# Create a new window with the current directory path
bind n new-window -c "#{pane_current_path}"
# Display interactive window selection menu
bind w choose-window
# Close/kill the current window
bind q kill-window

# Pane Splitting
# Split window vertically (creating side-by-side panes)
bind v split-window -h -c "#{pane_current_path}"
# Split window horizontally (creating top and bottom panes)
bind h split-window -v -c "#{pane_current_path}"

# Pane Navigation
# Navigate between panes using arrow keys
bind Left select-pane -L   # Move to left pane
bind Right select-pane -R  # Move to right pane
bind Up select-pane -U     # Move to pane above
bind Down select-pane -D   # Move to pane below

# Pane Resizing
# Resize panes using Shift+Arrow without prefix key
bind -n S-Left resize-pane -L 2   # Increase pane size to the left
bind -n S-Right resize-pane -R 2  # Increase pane size to the right
bind -n S-Up resize-pane -U 2     # Increase pane size upward
bind -n S-Down resize-pane -D 2   # Increase pane size downward

# Session Management
# Display interactive session selection menu
bind s choose-session
# Detach from current session (can be reattached with 'tmux attach')
bind d detach

# Configuration Management
# Reload tmux configuration file with visual confirmation
bind r source-file ~/.tmux.conf \; display "Configuration reloaded!"

# Help System
# Display custom cheatsheet in a popup window
bind ? display-popup -E "cat ~/.tmux-cheatsheet.txt || echo 'Create ~/.tmux-cheatsheet.txt with your shortcuts!'"

# Copy Mode (macOS specific)
# Use 'y' in copy mode to copy selection to macOS clipboard
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'

#------------------------------------------------------------------------------
# STATUS BAR CONFIGURATION
#------------------------------------------------------------------------------

# Enable status bar and position it at the bottom of the terminal
set -g status on
set -g status-position bottom

# Set status bar colors (black background with white text)
set -g status-style bg=black,fg=white

# Configure window list appearance in status bar
# Format for normal windows: index:name
set -g window-status-format "#I:#W"
# Format for current/active window: index:name (highlighted)
set -g window-status-current-format "#I:#W"
# Highlight the current window with green background
set -g window-status-current-style bg=green,fg=black,bold

# Configure left side of status bar to show visual indicator when prefix is active 
set -g status-left "#{?client_prefix,[Keys: n=new v=split h=hsplit],#[fg=yellow][#S]} "
set -g status-left-length 80

# Configure right side of status bar to show time and zoom indicator
# Shows a magnifying glass icon when a pane is zoomed
set -g status-right "#{?window_zoomed_flag,üîç ,}%H:%M"
set -g status-right-length 40

# Show a menu of common commands when prefix is pressed twice
bind C-a display-menu -T "Tmux Commands" \
  "New Window" n "new-window -c '#{pane_current_path}'" \
  "Split Vertical" v "split-window -h -c '#{pane_current_path}'" \
  "Split Horizontal" h "split-window -v -c '#{pane_current_path}'" \
  "Kill Window" q "kill-window" \
  "" \
  "Choose Window" w "choose-window" \
  "Choose Session" s "choose-session" \
  "Detach" d "detach-client" \
  "" \
  "Reload Config" r "source-file ~/.tmux.conf" \
  "Help" ? "display-popup -E 'cat ~/.tmux-cheatsheet.txt || echo Create ~/.tmux-cheatsheet.txt'"

